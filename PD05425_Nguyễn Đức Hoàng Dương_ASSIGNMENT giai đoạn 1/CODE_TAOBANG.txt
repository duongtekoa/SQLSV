create database QUANLITHUVIEN

create table SINHVIEN(
MASV VARCHAR(10) NOT NULL,
TENSV NVARCHAR(50) NOT NULL,
NGAYHETHAN DATE NOT NULL,
CHUYENNGANH NVARCHAR(50) NULL,
EMAIL VARCHAR(30) NOT NULL,
SDT   VARCHAR(15) NOT NULL,
)

ALTER TABLE SINHVIEN
ADD PRIMARY KEY (MASV);

create table LOAISACH(
MALOAI VARCHAR(10) NOT NULL,
TENLOAI NVARCHAR(50) NOT NULL,
)

ALTER TABLE LOAISACH
ADD PRIMARY KEY (MALOAI);

create table SACH(
MASACH VARCHAR(10) NOT NULL,
TENSACH NVARCHAR(50) NOT NULL,
NHAXUATBAN NVARCHAR(50) NOT NULL,
TACGIA NVARCHAR(50) NOT NULL,
SOLUONG INT NOT NULL,
GIA  MONEY  NOT NULL,
VITRI NVARCHAR(50) NOT NULL,
MALOAI VARCHAR(10) NOT NULL,
);

ALTER TABLE SACH
ADD PRIMARY KEY (MASACH);

create table PHIEUMUON(
MAPM VARCHAR(10) NOT NULL,
NGAYMUON DATE  NOT NULL,
NGAYTRA DATE  NOT NULL,
MASV VARCHAR(10) NOT NULL,
)

ALTER TABLE PHIEUMUON
ADD PRIMARY KEY (MAPM);

create table CHITIETPHIEUMUON(
MAPM VARCHAR(10) NOT NULL,
MASACH VARCHAR(10) NOT NULL,
GHICHU VARCHAR(50),
)

ALTER TABLE CHITIETPHIEUMUON
ADD PRIMARY KEY (MAPM,MASACH);

ALTER TABLE PHIEUMUON
ADD CONSTRAINT fk_MAPM
 FOREIGN KEY (MASV)
 REFERENCES SINHVIEN (MASV);

 ALTER TABLE CHITIETPHIEUMUON
ADD CONSTRAINT fk_MA_PM
 FOREIGN KEY (MAPM)
 REFERENCES PHIEUMUON (MAPM);

  ALTER TABLE CHITIETPHIEUMUON
ADD CONSTRAINT fk_MA_SACH
 FOREIGN KEY (MASACH)
 REFERENCES SACH (MASACH);